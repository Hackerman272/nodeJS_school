// можно воспользоваться WeakSet, добавляя туда прочитанные сообщения. Затем на определённом этапе можно почистить weakset и освободить память
